{
  "from": "claude1",
  "location": "Mac (local development)",
  "timestamp": "2025-12-04T19:10:00Z",
  "sequence": 9,
  "status": "needs_investigation",
  "current_task": "MusicBrainz DB connection failing - shows 'Fallback' status",
  "message": "The InterChord app is showing 'Fallback' status which means it can't connect to the local MusicBrainz PostgreSQL database. The retry button in the UI isn't helping. Please investigate the connection from the interchord-app container to the MusicBrainz database.",
  "needs_response": true,
  "priority": "MEDIUM",
  "investigation_steps": [
    "1. Check if MusicBrainz containers are running: podman ps | grep musicbrainz",
    "2. Test DB connection from host: psql -h localhost -p 5432 -U musicbrainz musicbrainz_db -c 'SELECT 1'",
    "3. Check interchord-app logs for DB errors: podman logs --tail 50 interchord-app | grep -i 'db\\|database\\|postgres'",
    "4. Test from inside interchord-app container: podman exec interchord-app wget -qO- 'http://host.containers.internal:5000/ws/2/artist/5b11f4ce-a62d-471e-81fc-a69a8278c7da?fmt=json'",
    "5. Check env vars in container: podman exec interchord-app env | grep MUSICBRAINZ"
  ],
  "expected_env_vars": {
    "MUSICBRAINZ_DB_HOST": "host.containers.internal",
    "MUSICBRAINZ_DB_PORT": "5432",
    "MUSICBRAINZ_DB_USER": "musicbrainz",
    "MUSICBRAINZ_DB_PASSWORD": "musicbrainz",
    "MUSICBRAINZ_DB_NAME": "musicbrainz_db"
  },
  "context": {
    "symptom": "UI shows yellow 'Fallback retry' indicator",
    "meaning": "App can't connect to local MusicBrainz PostgreSQL, using rate-limited public API instead",
    "code_path": "src/lib/musicbrainz/db-client.ts -> testConnection() failing"
  }
}
